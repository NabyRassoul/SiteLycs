(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5377],{97452:function(e,t,n){"use strict";n.d(t,{o:function(){return s}});n(29901);var o=n(24161),i=n(95610),r=n(26729),a=n(61250),s=function(e){var t=e.children,n=e.contentWrapperCssClasses,s=void 0===n?"flex-grow overflow-hidden":n,l=e.headerControl,c=e.headerWrapperCssClasses,u=void 0===c?"bg-white h-16 flex items-center px-6 border-b border-gray-100 flex-shrink-0":c,d=(0,o.useRecoilValue)(i.qx);return(0,a.jsxs)("div",{"data-onboarding-watch":"create_menu_new_button",className:"absolute inset-0 flex flex-col w-full overflow-y-auto",children:[l&&(0,a.jsx)("div",{className:u,children:l}),d?(0,a.jsx)(r.a,{size:"lg"}):(0,a.jsx)("div",{className:s,children:t})]})}},56408:function(e,t,n){"use strict";n.d(t,{H:function(){return f}});var o=n(83849),i=n.n(o),r=(n(29901),n(24161)),a=n(95610),s=n(92971),l=n(13645),c=n(74536),u=n(61250),d="https://creator.lottiefiles.com",f=function(e){var t=e.canCreateAnimations,n=void 0!==t&&t,o=e.canCreateFolder,f=void 0!==o&&o,p=e.canUpload,m=void 0!==p&&p,h=e.description,v=e.layout,w=void 0===v?"vertical":v,x=e.title,y=e.view,k=void 0===y?"dashboard":y,b=(0,r.useSetRecoilState)(s._b),C=(0,r.useSetRecoilState)(a.rU),g=300;return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:i()({"flex items-center justify-center":!0,"flex-col":"vertical"===w,"flex-row":"horizontal"===w}),children:["dashboard"===k&&(0,u.jsx)(l.V,{autoplay:!0,loop:!0,src:"/lotties/empty-dashboard.json",style:{width:"".concat(g,"px")}}),"empty-project"===k&&(0,u.jsx)(l.V,{autoplay:!0,loop:!0,src:"/lotties/empty-project.json",style:{width:"".concat(g,"px")}}),"empty-shared-with-me"===k&&(0,u.jsx)(l.V,{autoplay:!0,loop:!0,src:"/lotties/empty-pour-bottle.json",style:{width:"".concat(g,"px")}}),"empty-project-folders"===k&&(0,u.jsx)(l.V,{autoplay:!0,loop:!0,src:"/lotties/empty-3-mugs.json",style:{width:"".concat(g,"px")}}),"no-results"===k&&(0,u.jsx)(l.V,{autoplay:!0,loop:!0,src:"/lotties/search.json",style:{width:"".concat(g,"px")}}),"empty-collection"===k&&(0,u.jsx)(l.V,{autoplay:!0,loop:!0,src:"/lotties/empty-collection.json",style:{width:"".concat(g,"px")}}),(0,u.jsxs)("div",{className:i()({"flex flex-col text-gray-900":!0,"mt-6 items-center space-y-2":"vertical"===w,"ml-8":"horizontal"===w}),children:[(0,u.jsx)("div",{className:"text-2xl font-lf-bold",children:x}),(0,u.jsx)("div",{className:"max-w-sm text-sm md:text-center",children:h}),m&&(0,u.jsx)("div",{children:(0,u.jsxs)("button",{type:"button",onClick:function(){return b(!0)},className:"inline-flex items-center h-8 px-3 py-0 mt-4 space-x-1 text-sm leading-8 lf-btn primary font-lf-regular",children:[(0,u.jsx)(c.J,{name:"plus"}),(0,u.jsx)("span",{children:"Upload animations"})]})}),f&&(0,u.jsx)("div",{children:(0,u.jsx)("button",{type:"button",onClick:function(){return C(!0)},className:"inline-flex items-center h-8 px-3 py-0 mt-4 space-x-1 text-sm leading-8 lf-btn primary font-lf-regular",children:(0,u.jsx)("span",{children:"Create Folder"})})}),n&&(0,u.jsx)("div",{children:(0,u.jsx)("a",{className:"inline-flex items-center h-10 px-4 py-0 mt-4 space-x-1 text-base leading-5 align-middle lf-btn primary",href:d,target:"_blank",rel:"noreferrer",children:"Create animation"})})]})]})})}},75443:function(e,t,n){"use strict";var o=n(29901),i=n(96312);t.Z=function(){var e=(0,o.useState)(!1),t=e[0],n=e[1],r=function(e){(e.metaKey&&i.Mq||e.ctrlKey&&!i.Mq)&&n(!0)},a=function(e){(!e.metaKey&&i.Mq||!e.ctrlKey&&!i.Mq)&&n(!1)};return(0,o.useEffect)((function(){return document.addEventListener("keydown",r),document.addEventListener("keyup",a),function(){document.removeEventListener("keydown",r),document.removeEventListener("keyup",a)}}),[]),t}},3284:function(e,t,n){"use strict";var o=n(29901);t.Z=function(e){var t=e.onPress,n=e.onRelease,i=e.dependencies,r=void 0===i?[]:i,a=e.takesPrecedence;(0,o.useEffect)((function(){var e=function(e){var n=document.activeElement;n&&n.isContentEditable||n&&"button"===n.tagName.toLowerCase()&&!a||"Shift"===e.key&&(e.preventDefault(),t())},o=function(e){var t=document.activeElement;t&&t.isContentEditable||t&&"button"===t.tagName.toLowerCase()&&!a||"Shift"===e.key&&(e.preventDefault(),n())};return window.addEventListener("keydown",e),window.addEventListener("keyup",o),function(){window.removeEventListener("keydown",e),window.removeEventListener("keydown",o)}}),r)}},42371:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Z}});var o=n(69452),i=n(89303),r=n(55312),a=n(24642),s=n.n(a),l=n(26766),c=n(77837),u=n.n(c),d=n(4611),f=n(73378),p=n(17172),m=n(29901),h=n(24161),v=n(389),w=n(97452),x=n(56408),y=n(55369),k=n(95610),b=n(65815),C=n(75443),g=n(11706),j=n(3284),E=n(51638),S=n(36199),N=n(61250),I=(0,f.default)((0,r.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([n.e(3907),n.e(9465),n.e(412)]).then(n.bind(n,96961)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[96961]},modules:["collection/[id]/index.tsx -> @/components/ui/selection-bar"]}}),L=(0,f.default)((0,r.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([n.e(467),n.e(2113),n.e(6101),n.e(8029),n.e(9588)]).then(n.bind(n,6006)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[6006]},modules:["collection/[id]/index.tsx -> @/components/ui/headers/collection-header"]}}),M=(0,f.default)((0,r.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([n.e(467),n.e(837),n.e(7591),n.e(297),n.e(8113)]).then(n.bind(n,51855)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[51855]},modules:["collection/[id]/index.tsx -> @/components/ui/views/grid-view"]}}),_=(0,f.default)((0,r.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([n.e(4845),n.e(5471),n.e(9837),n.e(467),n.e(4868),n.e(1438),n.e(6660),n.e(3907),n.e(9663),n.e(2113),n.e(7971),n.e(4430),n.e(9465),n.e(6101),n.e(9380),n.e(8025),n.e(6242),n.e(5486)]).then(n.bind(n,9226)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[9226]},modules:["collection/[id]/index.tsx -> @/components/ui/views/list-view"]}}),R=[{field:"name",use:"Name",width:55},{field:"lastModified",use:"Last modified",width:20},{field:"creator",use:"Uploaded by",locked:!0,width:16},{field:"option",use:"",width:9}];function Z(){var e,t,n,a,c,f,Z,P,A=(0,d.useRouter)(),q=(0,g.k)().start,F=A.query,T=F.from,V=F.id,D=(0,m.useState)(null),W=D[0],G=D[1],O=(0,h.useSetRecoilState)(k.qx),H=(0,m.useState)(!1),U=H[0],Y=H[1],J=(0,m.useState)(!1),K=J[0],z=J[1],Q=(0,m.useState)(""),X=Q[0],B=Q[1],$=(0,m.useState)(!1),ee=$[0],te=$[1];(0,j.Z)({onPress:function(){te(!0)},onRelease:function(){te(!1)}});var ne=(0,m.useState)(null),oe=ne[0],ie=ne[1],re=(0,m.useState)(null),ae=re[0],se=re[1],le=(0,m.useState)(!1),ce=le[0],ue=le[1],de=(0,v.m8)(),fe=(0,v.aM)({query:y.yC,variables:{id:V},pause:!V}),pe=(0,i.Z)(fe,1)[0],me=(0,E.hp)(null===(e=pe.data)||void 0===e||null===(t=e.workspaceCollection)||void 0===t?void 0:t.workspaceId),he=(0,m.useMemo)((function(){var e;return null==W||null===(e=W.collectionPermissionScopes)||void 0===e?void 0:e.includes("full_access")}),[W]);(0,m.useEffect)((function(){if(pe.fetching)O(!0);else{if(O(!1),pe.error)throw new Error(pe.error.message);pe.data&&pe.data.workspaceCollection&&((0,l.Z9)(new l.hM({collectionId:pe.data.workspaceCollection.id,collectionName:pe.data.workspaceCollection.name,workspaceId:pe.data.workspaceCollection.workspaceId})),G(pe.data.workspaceCollection),O(!1))}}),[pe,O]);var ve=(0,v.aM)({query:y.QC,variables:{id:V,first:12},pause:!V}),we=(0,i.Z)(ve,1)[0],xe=null===(n=we.data)||void 0===n||null===(a=n.workspaceCollectionFiles)||void 0===a?void 0:a.edges.map((function(e){return e.node}));(0,m.useEffect)((function(){if(we.fetching)O(!0);else{if(O(!1),we.error)throw new Error(we.error.message);var e,t,n,o;we.data&&we.data.workspaceCollectionFiles&&(z(null!==(e=null===(t=we.data.workspaceCollectionFiles.pageInfo)||void 0===t?void 0:t.hasNextPage)&&void 0!==e&&e),B(null!==(n=null===(o=we.data.workspaceCollectionFiles.pageInfo)||void 0===o?void 0:o.endCursor)&&void 0!==n?n:""),O(!1))}}),[we,O]);var ye=(0,m.useState)("grid"),ke=ye[0],be=ye[1],Ce=(0,m.useCallback)((function(){be("grid"===ke?"list":"grid")}),[ke]),ge=(0,m.useState)([]),je=ge[0],Ee=ge[1],Se=je.length>0,Ne=(0,m.useCallback)((function(e){var t=je;console.log("select",e),e?((0,S.AW)(t,xe||[]),se(S.RT.LOADED),ue(!0)):((0,S.wh)(t,xe||[]),se(null),ue(!1)),Ee((0,o.Z)(t))}),[xe,je]),Ie=(0,m.useCallback)((0,r.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:we&&Ee((0,o.Z)(xe||[])),se(S.RT.EVERYTHING);case 2:case"end":return e.stop()}}),e)}))),[xe,we]),Le=(0,m.useCallback)((function(e){se(S.RT.LOADED);var t=je,n=t.map((function(e){return e.id})).indexOf(e);if(xe){var o=xe.find((function(t){return t.id===e}));if(!o)return;var i=xe.indexOf(o);if(ee)if(null===oe)t.push(o);else{var r=(0,S.Jm)(oe,i,xe);n>-1?(0,S.wh)(t,r):(0,S.AW)(t,r)}else n>-1?t.splice(n,1):t.push(o);ie(i)}Ee(t)}),[xe,ee,oe,je]),Me=(0,m.useCallback)((function(){Ee([]),se(null),ie(null),ue(!1)}),[]),_e=(0,m.useCallback)((function(){Me()}),[Me]),Re=(0,m.useCallback)((0,r.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,Y(!0),e.next=4,de.query(y.QC,{id:V,after:X,first:12}).toPromise();case 4:return e.prev=4,Y(!1),e.finish(4);case 7:case"end":return e.stop()}}),e,null,[[0,,4,7]])}))),[X,de,V]),Ze=(0,m.useCallback)((function(){we.data&&!we.fetching&&!U&&K&&X&&Re()}),[we.data,we.fetching,U,K,X,Re]);(0,m.useEffect)((function(){Me()}),[A.asPath,Me]);var Pe=u()((function(){q([b.JH])}),1500);(0,m.useEffect)((function(){we.data&&!we.fetching&&Pe()}),[we]);var Ae=(0,C.Z)(),qe=(0,m.useCallback)((function(e){if(W){var t="shared-with-me"===T,n="/collection/".concat(W.id,"/preview/").concat(e.id).concat(t?"?from=shared-with-me":"");Ae?window.open(n,"_blank"):A.push(n)}}),[T,Ae,A,W]),Fe=je.length&&(null==xe?void 0:xe.some((function(e){return-1===je.findIndex((function(t){return t.id===e.id}))})))||!1;return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(p.default,{children:(0,N.jsx)("title",{children:"LottieFiles Platform"})}),(0,N.jsx)(w.o,{headerWrapperCssClasses:"flex flex-cols items-center px-6 flex-shrink-0 pt-6 pb-4",contentWrapperCssClasses:"flex-grow p-6 pt-0",headerControl:(0,N.jsx)(L,{collection:W,view:ke,changeView:Ce,workspace:me,fromSharedWithMe:"shared-with-me"===T,fullAccess:he,onSelectAll:Ne,selectionType:ae,selectionIsIndeterminate:Fe,showSelectionBanner:ce,isSelectionMode:Se,clearSelection:Me,onSelectEverything:Ie,loadedCount:(null==xe?void 0:xe.length)||0,selectedCount:je.length,totalCount:(null==we||null===(c=we.data)||void 0===c||null===(f=c.workspaceCollectionFiles)||void 0===f?void 0:f.totalCount)||0}),children:W&&(0,N.jsxs)("div",{className:"space-y-3",children:[xe&&xe.length>0?(0,N.jsx)("div",{className:"space-y-4",children:"list"===ke?(0,N.jsx)(_,{id:"collection-list",files:xe,canLoadMore:K,isLoadingMore:U,onLoadMore:Ze,defaultColumns:R,onSelectionChange:Le,selectable:!0,selectionMode:Se,selectedAnimations:je,onItemClick:qe,workspaceId:null==me?void 0:me.id}):(0,N.jsx)(M,{files:xe,selectionMode:Se,showStatus:!1,onSelectionChange:Le,selectedAnimations:je,selectable:!0,canLoadMore:K,isLoadingMore:U,onLoadMore:Ze,onItemClick:qe,workspaceId:null==me?void 0:me.id})}):(0,N.jsx)(x.H,{title:"Show off your beautiful animations",description:"Add animations from your projects and share them with anyone.",view:"empty-collection"}),Se?(0,N.jsx)(I,{totalCount:(null===(Z=we.data)||void 0===Z||null===(P=Z.workspaceCollectionFiles)||void 0===P?void 0:P.totalCount)||0,type:"workflow-collection",resourceId:W.id,selectedAnimations:je,clear:Me,onRemove:_e,workspaceId:W.workspaceId,isEverythingSelected:ae===S.RT.EVERYTHING,contentStats:null}):null]})})]})}},95610:function(e,t,n){"use strict";n.d(t,{E4:function(){return o.E4},rU:function(){return o.rU},qx:function(){return o.qx},NY:function(){return o.NY}});var o=n(97527);n(19664)},36199:function(e,t,n){"use strict";var o;function i(e,t,n){var o=Math.min(e,t),i=Math.max(e+1,t+1);return n.splice(o,i-o)}function r(e,t){t.forEach((function(t){var n=e.findIndex((function(e){return e.id===t.id}));n>-1&&e.splice(n,1)}))}function a(e,t){t.forEach((function(t){-1===e.findIndex((function(e){return e.id===t.id}))&&e.push(t)}))}n.d(t,{RT:function(){return o},Jm:function(){return i},wh:function(){return r},AW:function(){return a}}),function(e){e.EVERYTHING="everything",e.LOADED="loaded"}(o||(o={}))},64051:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/collection/[id]",function(){return n(42371)}])}},function(e){e.O(0,[785,532,8361,7703,3069,9774,2888,179],(function(){return t=64051,e(e.s=t);var t}));var t=e.O();_N_E=t}]);