(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2242,9008],{77179:function(e,n,t){var r=t(18361);e.exports=function(e){return r(e,5)}},97452:function(e,n,t){"use strict";t.d(n,{o:function(){return s}});t(29901);var r=t(24161),o=t(95610),i=t(26729),a=t(61250),s=function(e){var n=e.children,t=e.contentWrapperCssClasses,s=void 0===t?"flex-grow overflow-hidden":t,l=e.headerControl,u=e.headerWrapperCssClasses,c=void 0===u?"bg-white h-16 flex items-center px-6 border-b border-gray-100 flex-shrink-0":u,d=(0,r.useRecoilValue)(o.qx);return(0,a.jsxs)("div",{"data-onboarding-watch":"create_menu_new_button",className:"absolute inset-0 flex flex-col w-full overflow-y-auto",children:[l&&(0,a.jsx)("div",{className:c,children:l}),d?(0,a.jsx)(i.a,{size:"lg"}):(0,a.jsx)("div",{className:s,children:n})]})}},36400:function(e,n,t){"use strict";t.d(n,{s:function(){return l}});var r=t(89303),o=(t(29901),t(24161)),i=t(62884),a=t(65513),s=t(61250),l=function(){var e=(0,o.useRecoilState)(i.Hw),n=(0,r.Z)(e,2),t=n[0],l=n[1];return(0,s.jsx)(a.n,{icon:"bounding-box",title:"Bounding box",onClick:function(){l(!t)},iconColorClass:t?"text-teal-300":"text-gray-600"})}},24313:function(e,n,t){"use strict";t.r(n);var r=t(77916),o=t(89303),i=t(55312),a=t(24642),s=t.n(a),l=t(59715),u=t(71108),c=t(26766),d=t(62295),f=t(83849),p=t.n(f),m=t(79120),v=t(77179),b=t.n(v),h=t(4611),x=t(73378),w=t(17172),g=t(29901),O=t(34742),C=t(24161),y=t(389),j=t(88431),E=t(96065),k=t(97452),S=t(36400),I=t(50295),M=t(95618),N=t(27467),P=t(65513),F=t(25067),T=t(65815),R=t(67503),L=t(20343),_=t(48321),A=t(53707),Z=t(59018),q=t(55791),U=t(40355),D=t(11706),G=t(40729),B=t(51638),V=t(28875),K=t(48412),z=t(30945),H=t(62884),W=t(58756),Q=t(95610),Y=t(92971),J=t(46641),X=t(61566),$=t(18705),ee=t(61250);function ne(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function te(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ne(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ne(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var re=(0,x.default)((0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(5471),t.e(9837),t.e(5575)]).then(t.bind(t,25575)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[25575]},modules:["animation/[id].tsx -> @/components/features/onboarding/onboarding-modal"]}}),oe=(0,x.default)((0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.e(8788).then(t.bind(t,8788)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[8788]},modules:["animation/[id].tsx -> @/components/features/upload/editor-handback-container"]}}),ie=(0,x.default)((0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(6627),t.e(5471),t.e(9837),t.e(4868),t.e(4185),t.e(2521),t.e(766)]).then(t.bind(t,10573)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[10573]},modules:["animation/[id].tsx -> @/components/features/palette-swapper/color-palette-confirmation-modal"]}}),ae=(0,x.default)((0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.e(9442).then(t.bind(t,39442)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[39442]},modules:["animation/[id].tsx -> @/components/ui/pushovers/animation-export-panel"]}}),se=(0,x.default)((0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(4550),t.e(106)]).then(t.bind(t,10106)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[10106]},modules:["animation/[id].tsx -> @/components/ui/pushovers/animation-qr-code"]}}),le=(0,x.default)((0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(467),t.e(7058)]).then(t.bind(t,47058)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[47058]},modules:["animation/[id].tsx -> @/components/ui/pushovers/animation-embed"]}}),ue=(0,x.default)((0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.e(7283).then(t.bind(t,97283)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[97283]},modules:["animation/[id].tsx -> @/components/ui/pushovers/animation-versions"]}}),ce=(0,x.default)((0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(6627),t.e(726),t.e(4588),t.e(5313),t.e(8024),t.e(70),t.e(9288),t.e(1281),t.e(1581),t.e(7064)]).then(t.bind(t,87064)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[87064]},modules:["animation/[id].tsx -> @/components/ui/pushovers/animation-segment-container"]}}),de=(0,x.default)((0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(6627),t.e(726),t.e(4588),t.e(5313),t.e(8024),t.e(70),t.e(1281),t.e(1581),t.e(8448)]).then(t.bind(t,47831)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[47831]},modules:["animation/[id].tsx -> @/components/features/lottie-in-context/lottie-mockup-panel"]}}),fe=(0,x.default)((0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(7713),t.e(4868),t.e(249),t.e(6617)]).then(t.bind(t,86617)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[86617]},modules:["animation/[id].tsx -> @/components/ui/pushovers/animation-color-palettes"]}}),pe=(0,x.default)((0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(243),t.e(8778),t.e(5471),t.e(9837),t.e(5313),t.e(4868),t.e(4270),t.e(5627),t.e(9455),t.e(6313),t.e(9199),t.e(8084)]).then(t.bind(t,68084)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[68084]},modules:["animation/[id].tsx -> @/components/ui/pushovers/animation-file-info"]}}),me=(0,x.default)((0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve().then(t.bind(t,50969)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[50969]},modules:["animation/[id].tsx -> @/components/page/animation/comment/comment-pushover"]}}),ve=(0,x.default)((0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.e(9321).then(t.bind(t,19321)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[19321]},modules:["animation/[id].tsx -> @/components/page/animation/background-color-control"]}}),be=(0,x.default)((0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(6627),t.e(726),t.e(4588),t.e(5313),t.e(70),t.e(1281)]).then(t.bind(t,11281)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[11281]},modules:["animation/[id].tsx -> @/components/features/lottie-in-context/lottie-mockup-preview"]}}),he=(0,x.default)((0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(6627),t.e(726),t.e(5313),t.e(261),t.e(3444)]).then(t.bind(t,80261)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[80261]},modules:["animation/[id].tsx -> @/components/page/animation/player/animation-player"]}}),xe=(0,x.default)((0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([t.e(5471),t.e(9837),t.e(5313),t.e(467),t.e(6660),t.e(9968),t.e(4550),t.e(3907),t.e(2113),t.e(6101),t.e(9380),t.e(9206),t.e(6397)]).then(t.bind(t,68158)));case 1:case"end":return e.stop()}}),e)}))),{ssr:!1,loadableGenerated:{webpack:function(){return[68158]},modules:["animation/[id].tsx -> @/components/ui/pushovers/animation-header"]}}),we=function(){var e,n,t,i,a,s,f,v,x,E,ne,we,ge,Oe,Ce,ye=(0,g.useState)(),je=ye[0],Ee=ye[1],ke=(0,C.useRecoilState)(H.sI),Se=(0,o.Z)(ke,2),Ie=Se[0],Me=Se[1],Ne=(0,g.useState)(),Pe=Ne[0],Fe=Ne[1],Te=(0,g.useState)(),Re=Te[0],Le=Te[1],_e=(0,C.useSetRecoilState)(Q.E4),Ae=(0,C.useSetRecoilState)(H.GG),Ze=(0,g.useState)(null),qe=Ze[0],Ue=Ze[1],De=(0,g.useState)(null),Ge=De[0],Be=De[1],Ve=(0,g.useState)(!1),Ke=Ve[0],ze=Ve[1],He=(0,C.useResetRecoilState)(H.h3),We=(0,C.useResetRecoilState)(H.m9),Qe=(0,C.useResetRecoilState)(H.lS),Ye=(0,C.useSetRecoilState)(Y.QJ),Je=(0,g.useState)(!1),Xe=Je[0],$e=Je[1],en=(0,g.useRef)(!1),nn=(0,g.useRef)(!1),tn=(0,C.useSetRecoilState)(Q.qx),rn=(0,g.useRef)(!1),on=(0,F.p)(),an=(0,h.useRouter)(),sn=an.query,ln=sn.frame,un=sn.sort,cn=(0,D.k)(),dn=cn.canShowOnboarding,fn=cn.start,pn=an.query,mn=pn.comment,vn=pn.handback_id,bn=pn.id,hn=(0,_.a)(),xn=(0,B.cF)(),wn=xn.activeWorkspaceId,gn=xn.setActiveWorkspace,On=xn.workspaces,Cn=(0,l.SS)(d.AD.ENABLE_ANIMATION_NAVIGATION_SHORTCUTS),yn=(0,y.aM)({query:V.wP,variables:{id:bn},pause:!bn}),jn=(0,o.Z)(yn,1)[0],En=(0,y.aM)({query:V.xQ,variables:{id:bn,sort:un,folderId:null===(e=jn.data)||void 0===e||null===(n=e.file.folder)||void 0===n?void 0:n.id},pause:!bn||!jn.data||!Cn.on}),kn=(0,o.Z)(En,1)[0],Sn=(0,C.useRecoilState)(H.fu),In=(0,o.Z)(Sn,2),Mn=In[0],Nn=In[1],Pn=(0,U._)("animation_sidebar_panel_state",{}),Fn=(0,o.Z)(Pn,2),Tn=Fn[0],Rn=Fn[1];(0,q.Z)({key:"k",action:function(){var e;if(!Cn.off)if(null!==(e=kn.data)&&void 0!==e&&e.fileAboveAndBelowId.nextAnimation){var n="/animation/".concat(kn.data.fileAboveAndBelowId.nextAnimation);un&&(n+="?sort=".concat(encodeURIComponent(un.toString()))),an.push(n),nn.current=!1}else if(!en.current){var t=(0,ee.jsx)("div",{children:"No more animations to go to"});null==on||on.pushCustom(t,1e3,"bg-gray-900","text-white"),en.current=!0}},dependencies:[kn,Cn.off],takesPrecedence:!0}),(0,q.Z)({key:"j",action:function(){var e;if(!Cn.off)if(null!==(e=kn.data)&&void 0!==e&&e.fileAboveAndBelowId.prevAnimation){var n="/animation/".concat(kn.data.fileAboveAndBelowId.prevAnimation);un&&(n+="?sort=".concat(encodeURIComponent(un.toString()))),an.push(n),en.current=!1}else if(!nn.current){var t=(0,ee.jsx)("div",{children:"No more animations to go to"});null==on||on.pushCustom(t,1e3,"bg-gray-900","text-white"),nn.current=!0}},dependencies:[kn,Cn.off],takesPrecedence:!0}),(0,g.useEffect)((function(){if(kn.data&&kn.data.fileAboveAndBelowId.nextAnimation&&!rn.current&&Cn.on){var e,n="next-prev-toast-".concat(null===(e=hn.user)||void 0===e?void 0:e.id),t=localStorage.getItem(n),r=(new Date).getTime();if(!t||r-parseInt(t,10)>12096e5){localStorage.setItem(n,r.toString());var o=(0,ee.jsxs)("div",{children:["Use the ",(0,ee.jsx)("span",{className:"px-2 py-0.5 mx-1 bg-gray-500 rounded",children:"J"})," and"," ",(0,ee.jsx)("span",{className:"px-2 py-0.5 mx-1 bg-gray-500 rounded",children:"K"})," keys to go to the next or previous animation"]});null==on||on.pushCustom(o,3e3,"bg-gray-900","text-white")}rn.current=!0}}),[on,Cn.on,null===(t=hn.user)||void 0===t?void 0:t.id,kn.data]),(0,g.useEffect)((function(){if(jn.data){var e,n,t,r=null===(e=jn.data.file.folder)||void 0===e?void 0:e.id,o=null===(n=jn.data.file.folder)||void 0===n?void 0:n.name,i=jn.data.file.project.id,a=jn.data.file.project.title,s=null!==(t=jn.data.file.project.isPrivate)&&void 0!==t&&t,l=jn.data.file.project.workspaceId,u=On.some((function(e){var n;return e.id===(null===(n=jn.data)||void 0===n?void 0:n.file.project.workspaceId)}));l&&u&&l!==wn&&gn(l,!1),Ye({type:r?"folder":"project",name:r?o:a,folderId:r,folderName:o,projectId:i,projectTitle:a,isPrivate:s,workspaceId:l})}}),[jn.data,Ye,wn,gn,On]);var Ln=(0,g.useState)("#f8fafc"),_n=Ln[0],An=Ln[1],Zn=(0,C.useRecoilState)(H.h3),qn=(0,o.Z)(Zn,1)[0],Un=(0,g.useState)({id:"",showDescOnCollection:!1,description:"",descriptionModifiedBy:null}),Dn=Un[0],Gn=Un[1];(0,g.useEffect)((function(){return He(),We(),jn.fetching&&tn(!0),jn.fetching||(tn(!1),Nn((function(e){if(null===e){var n;if(Tn&&null!==(n=hn.user)&&void 0!==n&&n.id&&Tn[hn.user.id]){var t=Tn[hn.user.id];return t===J.s.LOTTIE_MOCKUP?J.s.SEGMENT_MOCKUP:t}return J.s.DOWNLOAD}return e}))),function(){Nn(null)}}),[He,We,Nn,jn]),(0,g.useEffect)((function(){var e;null!=hn&&null!==(e=hn.user)&&void 0!==e&&e.id&&null!==Mn&&Rn((function(e){var n,t;return null!=hn&&null!==(n=hn.user)&&void 0!==n&&n.id?te(te({},e),{},(0,r.Z)({},null==hn||null===(t=hn.user)||void 0===t?void 0:t.id,Mn)):e}))}),[Mn,null==hn||null===(i=hn.user)||void 0===i?void 0:i.id]);var Bn=(0,g.useCallback)((function(e){try{void 0!==(0,m.H3)(e)&&An(e)}catch(e){An("#f8fafc")}}),[]);(0,g.useEffect)((function(){var e;if(null!=qn&&qn.fileObject){Ee(qn.fileObject.url),Fe(qn.fileObject.metadata),Le(qn.fileObject.attributes),Be(qn.fileObject),Bn(qn.backgroundColor);var n=qn.fileObject.url,t=n.substring(n.lastIndexOf("/")+1,n.indexOf("?")).split(".").pop();Ae("lottie"===t)}else if(jn.data&&!jn.fetching){var r;Ee(jn.data.file.fileObject.url),Me(jn.data.file),_e({type:"project",id:jn.data.file.project.id}),Fe(jn.data.file.fileObject.metadata),Le(jn.data.file.fileObject.attributes),Be(jn.data.file.fileObject),Gn({id:jn.data.file.id,showDescOnCollection:jn.data.file.showDescOnCollection,description:jn.data.file.description,descriptionUpdatedAt:null===(r=jn.data.file)||void 0===r?void 0:r.descriptionUpdatedAt,descriptionModifiedBy:jn.data.file.descriptionModifiedBy}),Bn(jn.data.file.backgroundColor);var o=jn.data.file.fileObject.url,i=o.substring(o.lastIndexOf("/")+1,o.indexOf("?")).split(".").pop();Ae("lottie"===i)}else if(jn.error)throw jn.error.toString().includes("Access denied")?new j.J:new Error(jn.error.message);if(null!==(e=jn.data)&&void 0!==e&&e.file.upgradeRequired)throw new R.K}),[jn,qn,Ae,Me,_e,Bn]),(0,g.useEffect)((function(){var e;null!==(e=jn.data)&&void 0!==e&&e.file.id&&(0,c.Z9)(new c.Aj({fileId:jn.data.file.id,projectId:jn.data.file.project.id,workspaceId:jn.data.file.project.workspaceId}))}),[null===(a=jn.data)||void 0===a?void 0:a.file.id,null===(s=jn.data)||void 0===s?void 0:s.file.project.id,null===(f=jn.data)||void 0===f?void 0:f.file.project.workspaceId]);var Vn=(0,g.useState)(!1),Kn=Vn[0],zn=Vn[1],Hn=(0,g.useState)(!1),Wn=Hn[0],Qn=Hn[1],Yn=(0,O.r)(),Jn=(0,L.a)({scopes:(null==Ie?void 0:Ie.animationPermissionScopes)||[]}),Xn=Jn.canDownload,$n=Jn.canFullAccess,et=Jn.canView,nt=(0,C.useRecoilState)(W.vQ),tt=(0,o.Z)(nt,2)[1],rt=(0,g.useCallback)((function(){an.query.comment&&(delete an.query.comment,an.push({pathname:an.pathname,query:an.query},void 0,{shallow:!0}))}),[an]),ot=(0,g.useCallback)((function(){Nn(J.s.NONE),$e(!1),Mn===J.s.COMMENTS&&rt()}),[Mn,Nn,$e,rt]),it=(0,g.useCallback)((function(e){return function(){Mn===e?(e===J.s.FILE_INFO&&tt(!1),ot()):(e!==J.s.FILE_INFO&&tt(!1),Nn(e)),Mn===J.s.COMMENTS&&rt()}}),[ot,Mn,Nn,tt,rt]);(0,g.useEffect)((function(){mn&&Mn!==J.s.COMMENTS&&it(J.s.COMMENTS)}),[mn,Mn,it]),(0,q.Z)({key:"c",action:function(){Mn!==J.s.COMMENTS&&Nn(J.s.COMMENTS),Mn===J.s.COMMENTS&&ot()},dependencies:[ot,Mn,Nn]});var at=(0,y.aM)({query:K.g,variables:{id:vn},pause:!vn}),st=(0,o.Z)(at,1)[0];(0,g.useEffect)((function(){Mn!==J.s.COMMENTS&&an.query.comment&&(it(J.s.COMMENTS)(),an.push({pathname:an.pathname,query:an.query},void 0,{shallow:!0})),an.query.edit_description&&(Mn!==J.s.FILE_INFO&&it(J.s.FILE_INFO)(),$e(!0),delete an.query.edit_description,an.replace({pathname:an.pathname,query:an.query},void 0,{shallow:!0}))}),[Mn,an,it,Xe]);var lt=(0,g.useCallback)((function(){Kn?(zn(!1),Yn.exit()):(zn(!0),Nn(J.s.NONE),Yn.enter())}),[Yn,Kn,Nn]),ut=(0,g.useCallback)((function(e,n){n===Yn&&zn(!!e)}),[Yn]);(0,g.useEffect)((function(){fn([T._r,T.T8,T.qO,T.fA,T.rG,T.Mx,T.QT])}),[Ie]);var ct=(0,g.useCallback)((function(){Qn(!Wn)}),[Wn,Qn]),dt=(0,g.useRef)(null),ft=(0,g.useMemo)((function(){return(null==qn?void 0:qn.id)||(null==Ie?void 0:Ie.currentVersionId)||""}),[null==qn?void 0:qn.id,null==Ie?void 0:Ie.currentVersionId]),pt=(0,g.useMemo)((function(){var e,n;return{entityId:ft,entityGroupId:(null==Ie?void 0:Ie.id)||bn,isEnabled:null==qn||!qn.id||qn.id===(null==Ie?void 0:Ie.currentVersionId),workspaceId:(null==Ie||null===(e=Ie.project)||void 0===e||null===(n=e.workspace)||void 0===n?void 0:n.id)||""}}),[ft,null==qn?void 0:qn.id,null==Ie?void 0:Ie.currentVersionId,null==Ie?void 0:Ie.id,null==Ie||null===(v=Ie.project)||void 0===v||null===(x=v.workspace)||void 0===x?void 0:x.id,bn]),mt=(0,A.X0)(pt),vt=(0,A.us)(pt),bt=(0,A.es)(pt),ht=(0,A.VP)(pt),xt=(0,A.UR)(pt),wt=(0,A.OL)(pt),gt=(0,A._i)(pt),Ot=(0,Z.M)({entityId:Mn===J.s.COMMENTS?ft:"",entityType:X.TY.FileVersion}),Ct=Ot.canFetchMoreComments,yt=Ot.commentsQuery,jt=Ot.onFetchMoreComments,Et=Ot.onHideReplies,kt=Ot.onShowReplies,St=Ot.parentComment,It=Ot.pushoverMode;(0,g.useEffect)((function(){ln&&Et(null)}),[ln,Et]);var Mt=(0,g.useMemo)((function(){return(0,m.H3)(_n||"#f8fafc")<.5}),[_n]),Nt=(0,y.aM)({query:z.mT,variables:{id:bn},pause:!bn||Mn!==J.s.COMMENTS}),Pt=(0,o.Z)(Nt,1)[0],Ft=(0,g.useState)(!1),Tt=Ft[0],Rt=Ft[1],Lt=(0,g.useCallback)((function(){return Rt(!0)}),[]),_t=(0,g.useCallback)((function(){return Rt(!1)}),[]);(0,g.useEffect)((function(){_t()}),[It,_t]);var At=(0,g.useCallback)((function(e){return function(){Mn!==e&&((0,c.Z9)(new c.lF({location:e})),it(e)())}}),[Mn,it]);return(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)(w.default,{children:(0,ee.jsx)("title",{children:(null==Ie?void 0:Ie.name)||"Animation"})}),(0,ee.jsxs)(k.o,{headerControl:(0,ee.jsx)(G.s,{features:null==Ie?void 0:Ie.features,children:(0,ee.jsx)(xe,{animation:Ie,animationFetching:jn.fetching})}),contentWrapperCssClasses:"flex overflow-hidden flex-grow",children:[Ie&&(0,ee.jsxs)(G.s,{features:Ie.features,children:[(0,ee.jsxs)(O.I,{className:p()({"flex flex-grow":!0}),handle:Yn,onChange:ut,children:[(0,ee.jsx)("div",{className:p()({"relative flex flex-grow ":!0,"transparency-grid":Wn}),children:(0,ee.jsxs)("div",{className:"relative flex w-full h-full",children:[(0,ee.jsx)("div",{className:p()({"absolute inset-0 flex flex-grow ":!0,"transparency-grid":Wn}),style:{background:_n}}),Mn===J.s.LOTTIE_MOCKUP?(0,ee.jsx)("div",{className:"relative flex items-center justify-center w-full h-full overflow-auto pr-80",children:(0,ee.jsx)(be,{animation:Ie,canEdit:$n()})}):(0,ee.jsxs)("div",{className:p()("relative flex items-center justify-center w-full h-full overflow-auto",{"pr-80":Mn}),children:[je&&!qe&&(0,ee.jsx)(he,{showComments:!0,canComment:!qn,mentionables:null===(E=Pt.data)||void 0===E?void 0:E.commentMentionableUsers,portalRoot:dt.current,animationUrl:je,currentDiscussion:St,currentUserId:null===(ne=hn.user)||void 0===ne?void 0:ne.id,entityId:ft,entityType:X.TY.FileVersion,controls:!Kn,isLight:Mt,onDeleteComment:mt,onEditComment:vt,onPostComment:bt,onReplyToComment:ht,onResolveComment:xt,onSelectReaction:wt,onUnresolveComment:gt}),je&&qe&&(0,ee.jsx)(he,{portalRoot:dt.current,animationUrl:b()(qe),controls:!Kn,isLight:Mt}),!Kn&&(0,ee.jsxs)("div",{className:p()("absolute top-0 bottom-0 flex flex-col pt-8 pr-8 pb-14 ",{"right-0":!Mn,"right-86":Mn}),children:[(0,ee.jsxs)("div",{className:"flex flex-col space-y-2","data-onboarding-id":"anim-panel-btn",children:[et()&&(0,ee.jsx)("div",{"data-onboarding-id":"anim-comment-btn",children:(0,ee.jsx)(P.n,{icon:"comment",title:"Comments",shortcut:(0,ee.jsx)(N.z,{keys:["C"]}),onClick:At(J.s.COMMENTS),iconColorClass:Mn===J.s.COMMENTS?"text-teal-300":"text-gray-600"})}),(0,ee.jsx)(P.n,{icon:"info",title:"Animation information",onClick:At(J.s.FILE_INFO),iconColorClass:Mn===J.s.FILE_INFO?"text-teal-300":"text-gray-600"}),$n()&&!qn&&(0,ee.jsx)("div",{"data-onboarding-id":"anim-color-palette-btn",children:(0,ee.jsx)(P.n,{icon:"color-palette",title:"Color Palette",onClick:At(J.s.COLOR_PALETTES),iconColorClass:Mn===J.s.COLOR_PALETTES?"text-teal-300":"text-gray-600"})}),!qn&&(0,ee.jsx)("div",{"data-onboarding-id":"anim-segment-btn",children:(0,ee.jsx)(P.n,{icon:"segment-mockup",title:"Segments & Mockups",onClick:At(J.s.SEGMENT_MOCKUP),iconColorClass:Mn===J.s.SEGMENT_MOCKUP?"text-teal-300":"text-gray-600"})}),$n()&&(0,ee.jsx)("div",{"data-onboarding-id":"anim-version-btn",children:(0,ee.jsx)(P.n,{icon:"history",title:"Version History",onClick:At(J.s.VERSIONS),iconColorClass:Mn===J.s.VERSIONS?"text-teal-300":"text-gray-600"})}),Xn()&&!qn&&(0,ee.jsx)(P.n,{icon:"embed",title:"Handoff & Embed",iconColorClass:Mn===J.s.EMBED?"text-teal-300":"text-gray-600",onClick:At(J.s.EMBED)})]}),(0,ee.jsxs)("div",{className:"flex flex-col mt-auto space-y-2",children:[(0,ee.jsx)(S.s,{}),(0,ee.jsx)(P.n,{icon:"grid",title:"Transparency grid",onClick:ct,iconColorClass:Wn?"text-teal-300":"text-gray-600"}),(0,ee.jsx)(ve,{animationBackgroundColor:_n,onChange:function(e){An(e)},fileId:Ie.id,portalRoot:dt.current}),(0,ee.jsx)(P.n,{icon:"full-screen",title:"Full screen",onClick:lt,iconColorClass:Kn?"text-teal-300":"text-gray-600"}),(0,ee.jsx)(I.L,{})]})]})]})]})}),(0,ee.jsx)("div",{className:"absolute bottom-0 right-0 flex flex-grow overflow-hidden top-16","data-onboarding-watch":"side_panel",children:(0,ee.jsxs)(u.uT,{show:Boolean(Mn),className:"relative flex flex-col bg-white border-l border-gray-100 w-86",enter:"transform transition ease-in-out duration-50",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transform transition ease-in-out duration-50",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:[Mn!==J.s.LOTTIE_MOCKUP&&(0,ee.jsx)("div",{className:"absolute right-6 top-6",children:(0,ee.jsx)(M.h,{name:"cross",onClick:ot,small:!0,iconLighter:!0})}),Mn===J.s.COMMENTS&&(0,ee.jsx)(me,{currentUserId:null===(we=hn.user)||void 0===we?void 0:we.id,discussions:null===(ge=yt.data)||void 0===ge||null===(Oe=ge.comments)||void 0===Oe?void 0:Oe.edges,isFetchingDiscussions:yt.fetching,isInputExpanded:Tt,mentionables:null===(Ce=Pt.data)||void 0===Ce?void 0:Ce.commentMentionableUsers,mode:It,parentDiscussion:St,canFetchMoreComments:Ct,onCollapseInput:_t,onFetchMoreComments:jt,onExpandInput:Lt,onDelete:mt,onEdit:vt,onPost:bt,onReply:ht,onReplyClick:kt,onResolve:xt,onSelectReaction:wt,onUnresolve:gt}),Mn===J.s.FILE_INFO&&Pe&&(0,ee.jsx)(pe,{fileMetaData:Pe,basicMetadata:Re,fileData:Dn,canEdit:$n(),canDownload:Xn(),isEditing:Boolean($n()&&Xe),fileUrl:je,animation:Ie,workspaceId:Ie.project.workspaceId}),Mn===J.s.COLOR_PALETTES&&(0,ee.jsx)(fe,{animationUrl:je,portalRoot:dt.current,workspaceId:Ie.project.workspaceId,setColorModifiedLottie:Ue,setOpenColorPaletteModal:ze}),Mn===J.s.LOTTIE_MOCKUP&&(0,ee.jsx)(de,{canEdit:$n(),animation:Ie,onBackToLottieMockupList:At(J.s.SEGMENT_MOCKUP)}),Mn===J.s.SEGMENT_MOCKUP&&(0,ee.jsx)(ce,{animation:Ie,showLottieMockup:At(J.s.LOTTIE_MOCKUP)}),Mn===J.s.VERSIONS&&(0,ee.jsx)(ue,{selectVersionPreview:function(){Ue(null),Qe()},animation:Ie}),Mn===J.s.EMBED&&(0,ee.jsx)(le,{fileId:Ie.id,currentVersionId:Ie.currentVersionId,workspaceId:Ie.project.workspaceId}),Mn===J.s.QRCODE&&(0,ee.jsx)(se,{fileUrl:Ie.fileObject.url}),Mn===J.s.DOWNLOAD&&Re&&(0,ee.jsx)(ae,{animation:Ie,basicMetadata:Re,fileMetaData:Pe})]})}),(0,ee.jsx)("div",{ref:dt})]}),Ke&&qe&&Ge&&(0,ee.jsx)(ie,{currentFile:Ge,currentFileId:null==Ie?void 0:Ie.id,lottieAnimation:qe,closeCallback:function(){ze(!1)},animationName:null==Ie?void 0:Ie.name,currentBackgroundColor:(null==Ie?void 0:Ie.backgroundColor)||"none",show:!0})]}),Ie&&vn&&!st.fetching&&st.data&&(0,ee.jsx)(oe,{animation:Ie,handback:st.data.fileHandback})]}),(0,ee.jsx)(re,{illustrationURL:"/images/onboarding-animation.png",show:dn($.yM.INTRO_ANIM_SEQUENCE),title:"A fresh new look for animation pages",description:"We’ve redesigned the animation pages from the ground up so you can easily get to the tools you’ll need and enjoy a better overall experience. Check out what we’ve changed!",buttonContent:"Let's go",onClose:function(){return fn([T.p9])}})]})};we.getLayout=function(e){return(0,ee.jsx)(E.B,{collapsed:!0,children:e})},n.default=we},40729:function(e,n,t){"use strict";t.d(n,{s:function(){return s},w:function(){return l}});var r=t(62295),o=t(29901),i=t(61250),a=o.createContext({features:[]}),s=function(e){var n=e.children,t=e.features;return(0,i.jsx)(a.Provider,{value:{features:t},children:n})},l=function(){var e=o.useContext(a).features;return e?new r.UZ(e):new r.UZ([])}},95610:function(e,n,t){"use strict";t.d(n,{E4:function(){return r.E4},rU:function(){return r.rU},qx:function(){return r.qx},NY:function(){return r.NY}});var r=t(97527);t(19664)},17172:function(e,n,t){e.exports=t(17158)},83907:function(e,n,t){e=t.nmd(e),function(t,r){"use strict";var o={};t.PubSub?(o=t.PubSub,console.warn("PubSub already loaded, using existing version")):(t.PubSub=o,function(e){var n={},t=-1,r="*";function o(e){var n;for(n in e)if(Object.prototype.hasOwnProperty.call(e,n))return!0;return!1}function i(e){return function(){throw e}}function a(e,n,t){try{e(n,t)}catch(e){setTimeout(i(e),0)}}function s(e,n,t){e(n,t)}function l(e,t,r,o){var i,l=n[t],u=o?s:a;if(Object.prototype.hasOwnProperty.call(n,t))for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&u(l[i],e,r)}function u(e,n,t){return function(){var o=String(e),i=o.lastIndexOf(".");for(l(e,e,n,t);-1!==i;)i=(o=o.substr(0,i)).lastIndexOf("."),l(e,o,n,t);l(e,r,n,t)}}function c(e){var t=String(e);return Boolean(Object.prototype.hasOwnProperty.call(n,t)&&o(n[t]))}function d(e){for(var n=String(e),t=c(n)||c(r),o=n.lastIndexOf(".");!t&&-1!==o;)o=(n=n.substr(0,o)).lastIndexOf("."),t=c(n);return t}function f(e,n,t,r){var o=u(e="symbol"==typeof e?e.toString():e,n,r);return!!d(e)&&(!0===t?o():setTimeout(o,0),!0)}e.publish=function(n,t){return f(n,t,!1,e.immediateExceptions)},e.publishSync=function(n,t){return f(n,t,!0,e.immediateExceptions)},e.subscribe=function(e,r){if("function"!=typeof r)return!1;e="symbol"==typeof e?e.toString():e,Object.prototype.hasOwnProperty.call(n,e)||(n[e]={});var o="uid_"+String(++t);return n[e][o]=r,o},e.subscribeAll=function(n){return e.subscribe(r,n)},e.subscribeOnce=function(n,t){var r=e.subscribe(n,(function(){e.unsubscribe(r),t.apply(this,arguments)}));return e},e.clearAllSubscriptions=function(){n={}},e.clearSubscriptions=function(e){var t;for(t in n)Object.prototype.hasOwnProperty.call(n,t)&&0===t.indexOf(e)&&delete n[t]},e.countSubscriptions=function(e){var t,r,o=0;for(t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&0===t.indexOf(e)){for(r in n[t])o++;break}return o},e.getSubscriptions=function(e){var t,r=[];for(t in n)Object.prototype.hasOwnProperty.call(n,t)&&0===t.indexOf(e)&&r.push(t);return r},e.unsubscribe=function(t){var r,o,i,a=function(e){var t;for(t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&0===t.indexOf(e))return!0;return!1},s="string"==typeof t&&(Object.prototype.hasOwnProperty.call(n,t)||a(t)),l=!s&&"string"==typeof t,u="function"==typeof t,c=!1;if(!s){for(r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(o=n[r],l&&o[t]){delete o[t],c=t;break}if(u)for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&o[i]===t&&(delete o[i],c=!0)}return c}e.clearSubscriptions(t)}}(o)),void 0!==e&&e.exports&&(n=e.exports=o),n.PubSub=o,e.exports=n=o}("object"==typeof window&&window||this)},34742:function(e,n,t){"use strict";t.d(n,{I:function(){return f},r:function(){return d}});var r=t(29901),o={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},i=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],a=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],s=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],l="undefined"!=typeof window&&void 0!==window.document?window.document:{},u="fullscreenEnabled"in l&&Object.keys(o)||i[0]in l&&i||a[0]in l&&a||s[0]in l&&s||[],c={requestFullscreen:function(e){return e[u[o.requestFullscreen]]()},requestFullscreenFunction:function(e){return e[u[o.requestFullscreen]]},get exitFullscreen(){return l[u[o.exitFullscreen]].bind(l)},get fullscreenPseudoClass(){return":"+u[o.fullscreen]},addEventListener:function(e,n,t){return l.addEventListener(u[o[e]],n,t)},removeEventListener:function(e,n,t){return l.removeEventListener(u[o[e]],n,t)},get fullscreenEnabled(){return Boolean(l[u[o.fullscreenEnabled]])},set fullscreenEnabled(e){},get fullscreenElement(){return l[u[o.fullscreenElement]]},set fullscreenElement(e){},get onfullscreenchange(){return l[("on"+u[o.fullscreenchange]).toLowerCase()]},set onfullscreenchange(e){return l[("on"+u[o.fullscreenchange]).toLowerCase()]=e},get onfullscreenerror(){return l[("on"+u[o.fullscreenerror]).toLowerCase()]},set onfullscreenerror(e){return l[("on"+u[o.fullscreenerror]).toLowerCase()]=e}};function d(){var e=(0,r.useState)(!1),n=e[0],t=e[1],o=(0,r.useRef)(null);(0,r.useEffect)((function(){var e=function(){t(c.fullscreenElement===o.current)};return c.addEventListener("fullscreenchange",e),function(){return c.removeEventListener("fullscreenchange",e)}}),[]);var i=(0,r.useCallback)((function(){return c.fullscreenElement?c.exitFullscreen().then((function(){return c.requestFullscreen(o.current)})):o.current?c.requestFullscreen(o.current):void 0}),[]),a=(0,r.useCallback)((function(){return c.fullscreenElement===o.current?c.exitFullscreen():Promise.resolve()}),[]);return(0,r.useMemo)((function(){return{active:n,enter:i,exit:a,node:o}}),[n,i,a])}var f=function(e){var n=e.handle,t=e.onChange,o=e.children,i=e.className,a=[];return i&&a.push(i),a.push("fullscreen"),n.active&&a.push("fullscreen-enabled"),(0,r.useEffect)((function(){t&&t(n.active,n)}),[n.active]),r.createElement("div",{className:a.join(" "),ref:n.node,style:n.active?{height:"100%",width:"100%"}:void 0},o)}}}]);